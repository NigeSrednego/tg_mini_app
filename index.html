<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Telegram Mini App — Search & Leaderboard</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="app-container">
    <div class="wrap">
      <!-- SEARCH -->
      <section class="search-card" aria-label="Поиск пользователей">
        <div class="search-row">
          <input id="q" class="search-input" placeholder="SEARCH" autocomplete="off" />
          <button class="icon-btn" id="btnSearch" aria-label="Искать">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="2"></circle>
              <path d="M20 20L16.65 16.65" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path>
            </svg>
          </button>
        </div>
      </section>
    </div>

    <!-- CONTENT -->
    <main class="content">
      <div class="wrap">
        <section id="tab-search" class="tab-content active">
          <div class="panel">
            <h2>Search</h2>
            <p class="muted">Здесь будет список найденных пользователей/профилей. Нажми Enter в поле поиска или лупу.</p>
          </div>
        </section>

        <section id="tab-leaderboard" class="tab-content">
          <div class="panel">
            <h2>Leaderboard</h2>
            <p class="muted">Здесь появится таблица лидеров. Верстка оптимизирована под мини-окно Telegram и мобильные.</p>
          </div>
        </section>
      </div>
    </main>

    <!-- TABBAR -->
    <nav class="tabbar" role="navigation" aria-label="Главная навигация">
      <div class="tabs wrap no-pad">
        <button class="tab-btn active" data-tab="tab-search" aria-controls="tab-search" aria-selected="true">Search</button>
        <button class="tab-btn" data-tab="tab-leaderboard" aria-controls="tab-leaderboard" aria-selected="false">Leaderboard</button>
      </div>
    </nav>
  </div>

  <script>
    // Telegram Mini App init
    (function () {
      const tg = window.Telegram?.WebApp;
      try { tg?.ready(); tg?.expand(); } catch (_) {}
    })();

    // Tabs
    const tabButtons = document.querySelectorAll('.tab-btn');
    const tabs = document.querySelectorAll('.tab-content');
    tabButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const id = btn.getAttribute('data-tab');
        tabButtons.forEach(b => {
          const active = b === btn;
          b.classList.toggle('active', active);
          b.setAttribute('aria-selected', active ? 'true' : 'false');
        });
        tabs.forEach(t => t.classList.toggle('active', t.id === id));
        // скроллим контент к началу панели, чтобы не было скачков
        document.querySelector('.content').scrollTo({ top: 0, behavior: 'smooth' });
      });
    });

    // Search hook
    const input = document.getElementById('q');
    const btnSearch = document.getElementById('btnSearch');
    function runSearch(){
      const q = input.value.trim();
      if(!q) return;
      console.log('Search:', q);
    }
    btnSearch.addEventListener('click', runSearch);
    input.addEventListener('keydown', (e) => {
      if(e.key === 'Enter') runSearch();
    });
  </script>
</body>
</html>
